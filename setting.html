<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>設定画面</title>
  <style>
    body {
      font-family: "Yu Gothic", sans-serif;
      padding: 20px;
      background: #eef;
    }
    label {
      font-size: 20px;
      display: block;
      margin-top: 20px;
    }
    select {
      font-size: 20px;
      padding: 5px;
    }
    button {
      margin-top: 30px;
      font-size: 22px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>

  <h2>設定画面</h2>

  <!-- ▼ テレビを消す時間 -->
  <label>テレビを消す時間</label>
  <select id="tvHour"></select> 時
  <select id="tvMinute"></select> 分

  <!-- ▼ 家を出る時間（追加） -->
  <label>家を出る時間</label>
  <select id="leaveHour"></select> 時
  <select id="leaveMinute"></select> 分

  <br><br>
  <button onclick="save()">保存する</button>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyjdLcMw14juT0WcyUBgn8xu18_2AajvESaXPj0rhHTf-A9jGTw4fWcwazX1dEPtuisDw/exec";

    // ▼ 時刻選択肢を作成
    function fillSelect(id, max) {
      const sel = document.getElementById(id);
      for (let i = 0; i <= max; i++) {
        const op = document.createElement("option");
        op.value = i;
        op.textContent = i;
        sel.appendChild(op);
      }
    }

    fillSelect("tvHour", 23);
    fillSelect("tvMinute", 59);
    fillSelect("leaveHour", 23);
    fillSelect("leaveMinute", 59);

    // ▼ 設定を読み込む
    async function load() {
      const res = await fetch(API_URL);
      const data = await res.json();

      document.getElementById("tvHour").value = data.hour;
      document.getElementById("tvMinute").value = data.minute;

      // ▼ 家を出る時間（追加）
      document.getElementById("leaveHour").value = data.leaveHour;
      document.getElementById("leaveMinute").value = data.leaveMinute;
    }

    load();

    // ▼ 保存する
    async function save() {
      const tvHour = document.getElementById("tvHour").value;
      const tvMinute = document.getElementById("tvMinute").value;

      const leaveHour = document.getElementById("leaveHour").value;
      const leaveMinute = document.getElementById("leaveMinute").value;

      await fetch(API_URL, {
        method: "POST",
        body: JSON.stringify({
          hour: tvHour,
          minute: tvMinute,
          leaveHour: leaveHour,
          leaveMinute: leaveMinute
        })
      });

      alert("保存しました！");
    }
  </script>

</body>
</html>


